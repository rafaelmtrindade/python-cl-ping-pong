from consoles import ConsoleNavigator
from elements import *


def decide_max_sets(nav: ConsoleNavigator):
    '''
    Pede ao usuário que escolha o número máximo de sets
    para a partida.
    '''
    prompt_strs = [
        'A cada 15 pontos, se forma um set.',
        'Quantos sets serão necessários para vencer? '
    ]
    try:
        inp = input('\n'.join(prompt_strs))
        max_sets = int(inp)
    except ValueError:
        max_sets = 0

    if max_sets <= 0:
        max_sets = 1

    nav.move_cursor_to_init_pos()
    for s in prompt_strs:
        l = len(s) if s != prompt_strs[-1] else len(s+inp)
        print(' '*l)

    return max_sets


def print_win_condition(n_sets):
    print(
        f'Vence o primeiro a chegar em {n_sets} set{"s" if n_sets > 1 else ""}!')

# Anims


left_player_hit = Animation([
    """\
|=====================================|
|  |                                  |
|  |    。                            |
|  |   Q_ 0  .-----\-----.  ,_0 _     |
|  |     / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |         °                        |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |             ⚬                    |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                 。               |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \  °  \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                      °           |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
"""
])

left_player_crit = Animation([
    """\
|=====================================|
|  |                                  |
|  |    。                            |
|  |   Q_ 0  .-----\-----.  ,_0 _     |
|  |     / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |              。                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \    °\    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                          °       |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
"""
])

left_player_miss = Animation([
    """\
|=====================================|
|  |                                  |
|  |  。                              |
|  |   Q_ 0  .-----\-----.  ,_0 _     |
|  |     / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                                  |
| ⚬|    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |⚬ o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",

    """\
|=====================================|
|  |                                  |
|  |                                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/   °          |          |          |
|                                     |
'---===============================---'\
"""
])

left_player_mark = Animation([
    """\
|=====================================|
|  |     :                            |
|  |     v                            |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |     :                            |
|  |     v                            |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
    """
], 3)

########################################
#              RIGHT SIDE              #
########################################

right_player_hit = Animation([
    """\
|=====================================|
|  |                                  |
|  |                             。   |
|  |    _ 0  .-----\-----.  ,_0 _,O   |
|  |  o' / \ |\     \     \    \      |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                       °          |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                  ⚬               |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |               。                 |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\  °  \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |         °                        |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
    """
])

right_player_crit = Animation([
    """\
|=====================================|
|  |                                  |
|  |                             。   |
|  |    _ 0  .-----\-----.  ,_0 _,O   |
|  |  o' / \ |\     \     \    \      |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                。                |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\°    \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |      °                           |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
    """
])

right_player_miss = Animation([
    """\
|=====================================|
|  |                                  |
|  |                                。|
|  |    _ 0  .-----\-----.  ,_0 _,O   |
|  |  o' / \ |\     \     \    \      |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
    """
])

right_player_mark = Animation([
    """\
|=====================================|
|  |                           :      |
|  |                           v      |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                           :      |
|  |                           v      |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
""",
    """\
|=====================================|
|  |                                  |
|  |                                  |
|  |    _ 0  .-----\-----.  ,_0 _     |
|  |  o' / \ |\     \     \    \ `o   |
|  |____|\___|_`-----\-----`__ /|_____|
| /     / |     |          |  | \\     |
|/              |          |          |
|                                     |
'---===============================---'\
"""
], 3)


left_anims = AnimationCollection(
    left_player_crit,
    left_player_hit,
    left_player_miss,
    left_player_mark,
    # left_player_serve
    # left_player_fail_serve)
    None)

right_anims = AnimationCollection(
    right_player_crit,
    right_player_hit,
    right_player_miss,
    right_player_mark,
    # right_player_serve
    # right_player_fail_serve)
    None)


if __name__ == '__main__':

    # NAVIGATOR = ConsoleNavigator()
    print()
    NAVIGATOR = ConsoleNavigator()

    # max_sets = decide_max_sets(NAVIGATOR)
    # NAVIGATOR.move_cursor_to_init_pos()
    # print_win_condition(max_sets)

    # print('col:', NAVIGATOR.init_col)
    # print('row:', NAVIGATOR.init_row)

    # NAVIGATOR.move_cursor_to_init_pos()
    # exit()

    left_player_hit.animate(NAVIGATOR, 0)
    left_player_crit.animate(NAVIGATOR, 0)
    left_player_miss.animate(NAVIGATOR, 0)
    left_player_mark.animate(NAVIGATOR, 0)

    right_player_hit.animate(NAVIGATOR, 0)
    right_player_crit.animate(NAVIGATOR, 0)
    right_player_miss.animate(NAVIGATOR, 0)
    right_player_mark.animate(NAVIGATOR, 0)

    left_player_hit.animate(NAVIGATOR, 0)
    left_player_crit.animate(NAVIGATOR, 0)
    left_player_miss.animate(NAVIGATOR, 0)
    left_player_mark.animate(NAVIGATOR, 0)

    right_player_hit.animate(NAVIGATOR, 0)
    right_player_crit.animate(NAVIGATOR, 0)
    right_player_miss.animate(NAVIGATOR, 0)
    right_player_mark.animate(NAVIGATOR, 0)
